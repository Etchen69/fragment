<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>移动端横竖屏的检测与切换</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" >
    <meta name="format-detection" content="telephone=no" />
        <meta name="format-detection" content="address=no" />
        <meta name="applicable-device" content="mobile">
        <meta http-equiv="Cache-Control" content="no-transform" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="author" content="网易，NetEase Inc." />
        <meta name="copyright" content="网易，NetEase Inc." />
        <meta name="pmid" content="" />
        <meta name="editor" content="" />
        <meta name="designer" content="" />
        <meta name="front-end technicist" content="kongtianyu" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style>
        html, body{
            width:100%;
            height:100%;
            padding:0;
            margin:0;
        }
        .example{
            width:100%;
            height:50px;
        }
    </style>
</head>
<body>
    <div class="example" id="example"></div>
	<!-- <script src="https://nie.res.netease.com/comm/js/zepto(mixNIE).last.js"></script> -->
	<script>
		// var initScreen=function(callback){//初始化html  font-size
    // $("html").css("font-size",document.documentElement.clientHeight/document.documentElement.clientWidth<1.5 ? (document.documentElement.clientHeight/603*312.5+"%") : (document.documentElement.clientWidth/375*312.5+"%")); //单屏全屏布局时使用,短屏下自动缩放
//     $("html").css("font-size",document.documentElement.clientWidth/375*312.5+"%");//长页面时使用,不缩放
//     if(callback)callback();
// }


// function _onorientationchange(e){
//     if(window.orientation==90||window.orientation==-90){
//         $('body').css("background", "red");  //显示竖屏浏览提示框
//     }else{//竖屏下恢复默认显示效果
//         var st=setTimeout(initScreen,300);
//          $('body').css("background", "blue");    
//     }
    
// }
// $(function(){
//     initScreen();
//     window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize",     function(e){_onorientationchange(e);}, false);
// })
    function handleOrientationchange(){
        var clientWidth = document.documentElement.clientWidth;
        var clientHeight = document.documentElement.clientHeight;
            alert(clientWidth);
            alert(clientHeight);
            alert(window.orientation);
        if(window.orientation){
            if(window.orientation == 90 || window.orientation == -90){
                document.getElementById('example').style.background = 'blue';
            }else{
                document.getElementById('example').style.background = 'red';
            }
        }else{
            if(clientWidth < clientHeight){
                alert('red');
                document.getElementById('example').style.background = 'red';
                // $('.example').css('background', 'red');
            }else{
                document.getElementById('example').style.background = 'blue';
            }
        }
    }

        // handleOrientationchange();
        // window.addEventListener('onorientationchange' in window ? 'orientation':'resize', handleOrientationchange, false);

    // $(window).resize(function(){
    //     alert('ok');
    //     handleOrientationchange();
    // })
    window.onresize = function(){
        alert('ok');
        handleOrientationchange();
    }
	</script>
</body>
</html>