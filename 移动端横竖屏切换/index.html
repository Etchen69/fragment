<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>移动端横竖屏的检测与切换</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" >
    <style>
        html, body{
            width:100%;
            height:100%;
            padding:0;
            margin:0;
        }
        .example{
            width:100%;
            height:50px;
        }
    </style>
</head>
<body>
    <div class="example" id="example"></div>
	<script>

        // 处理横竖屏函数
        function handleOrientationchange(){
            // 获取客户端的宽高
            var clientWidth = document.documentElement.clientWidth;
            var clientHeight = document.documentElement.clientHeight;
            // 判断浏览器是否支持window.orientation
            var isSupportWindowOrientation = (typeof window.orientation == 'number' && typeof window.onorientationchange == 'object');

            alert(clientWidth);
            alert(clientHeight);
            alert(window.orientation);
            alert(window.onorientationchange);
            alert(isSupportWindowOrientation);
            
            // 如果支持window.orientation则使用window.orientation的值进行判断是否横屏，如果不支持，则利用客户端宽高的大小进行判断。
            if(isSupportWindowOrientation){
                if(window.orientation == 90 || window.orientation == -90){
                    alert('o-blue');
                    document.getElementById('example').style.background = 'blue';
                }else{
                    alert('o-red');
                    document.getElementById('example').style.background = 'red';
                }
            }else{
                if(clientWidth < clientHeight){
                    alert('red');
                    document.getElementById('example').style.background = 'red';
                }else{
                    alert('blue');
                    document.getElementById('example').style.background = 'blue';
                }
            }
        }
    
        // 为浏览器监听屏幕变化事件
        // 第一种利用window的resize事件
        // window.addEventListener('resize', handleOrientationchange, false);

        // window.onresize = function(){
        //     alert('ok');
        //     handleOrientationchange();
        // }
        
        // 第二种利用window的orientationchange事件
        // window.addEventListener('orientationchange', handleOrientationchange, false);

        // 第三种将以上两种结合使用
        window.addEventListener('onorientationchange' in window ? 'orientationchange':'resize', handleOrientationchange, false);

	</script>
</body>
</html>